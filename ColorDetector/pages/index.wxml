<view>
  <t-dialog visible="{{passwordInput}}"
    title="邀请码"
    confirm-btn="{{confirmBtn}}"
    cancel-btn="取消"
    block
    overlay-props="{{passwordInputOverlayProps}}"
    bind:confirm="confirmDialog"
    bind:cancel="closeDialog">
    <t-input class="dialog-input"
      bind:change="onInputChange"
      clearable
      value="{{inputValue}}"
      slot="content"
      placeholder="请输入邀请码"
      placeholder-class="placeholder" />
  </t-dialog>
  <view style="margin-top: 20rpx; ">
    <view style="height: 600rpx; margin: 0 24rpx 0 24rpx; background-color: rgba(0,0,0,0.1); position: relative; border-radius: 24rpx; overflow: hidden;">
      <image src="{{imageSrc}}"
        style="height: 600rpx; width: 100%;"
        bind:tap="openViewer"
        mode="aspectFit"></image>
      <!-- <view style="position: absolute; bottom: 24rpx; left: 24rpx; border-radius: 32rpx; display: flex; background: rgba(0,0,0,0.5); justify-content: center; align-items: center;">
        <t-icon name="camera"
          style="margin-left: 24rpx; color: white;"></t-icon>
        <button type="primary"
          style="background: transparent"
          class="small-font"
          bind:tap="takePhoto">使用相机</button>
      </view> -->
      <view style="position: absolute; bottom: 24rpx; right: 24rpx; border-radius: 32rpx; display: flex; background: rgba(0,0,0,0.5); justify-content: center; align-items: center;">
        <t-icon name="file-image"
          style="margin-left: 24rpx; color: white;"></t-icon>
        <button type="primary"
          style="background: transparent; border-color: transparent;"
          class="small-font"
          bindtap="chooseImage">选择图片</button>
      </view>
    </view>

    <!-- <view style="margin-left: 24rpx; margin-right: 24rpx; margin-top: 20rpx;">
      <t-progress theme="plump"
        percentage="{{percentage}}" />
    </view> -->
    <view class="demo-desc"
      style="margin: 24rpx 24rpx; font-size: 32rpx;"
      class="small-font">分析结果</view>
    <t-tabs defaultValue="{{1}}"
      bind:change="onTabsChange"
      bind:click="onTabsClick"
      class="tabs">
      <t-tab-panel label="颜色分析"
        value="0">
        <scroll-view style="height: 500rpx; padding-top: 30rpx;"
          scroll-y="true"
          type="custom">
          <view wx:for="{{colorResult}}"
            wx:key="*this"
            style="display: flex; flex-direction: column; justify-content: center; align-items: center; margin-left: 24rpx; margin-right: 24rpx; margin-top: 10rpx; margin-bottom: 10rpx;">
            <view style="width: 100%; display: flex; flex-direction: row;">
              <view style="width: 50%; height: 80rpx; justify-content: center;display: flex;">
                <view style="background-color: {{item.hex}}; width: 240rpx; height: 50rpx; border-radius: 12rpx; overflow: hidden;"> </view>
              </view>
              <view style="width: 50%; justify-content: center;display: flex;">
                <text style="margin-right: 20rpx; "
                  class="small-font">{{item.colorGroupName}} </text>
                <text style="font-weight: 700;"
                  class="small-font">{{item.percentage}}%</text>
              </view>
            </view>
          </view>
        </scroll-view>
      </t-tab-panel>
      <t-tab-panel label="分布图"
        value="1">
        <view style="height: 600rpx;">
          <ec-canvas id="mychart-dom-bar"
            canvas-id="mychart-bar"
            ec="{{ ec }}"></ec-canvas>
        </view>
      </t-tab-panel>
    </t-tabs>
  </view>

</view>

<t-message id="t-message" />